(function(t){function e(e){for(var o,s,i=e[0],c=e[1],l=e[2],d=0,h=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&h.push(n[s][0]),n[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],o=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(o=!1)}o&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var o={},n={app:0},a=[];function s(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=o,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(r,o,function(e){return t[e]}.bind(null,o));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var o=r("85ec"),n=r.n(o);n.a},1:function(t,e){},"420a":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("set-game")],1)},a=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"game-body",class:{pink:1===t.colorState,blue:2===t.colorState}},[r("div",{staticClass:"game-container"},[r("div",{staticClass:"join-room"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.roomName,expression:"roomName"}],attrs:{type:"text"},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value)}}}),r("a",{staticClass:"a-button",attrs:{href:t.roomUrl}},[t._v("Join room")])]),r("div",{staticClass:"bar"},[r("div",{staticClass:"info",class:{hidden:t.loading}},[t._v(t._s(t.setExists?"A SET EXISTS.":"NO SETS EXIST."))]),r("div",{staticClass:"controls"},[r("button",{on:{click:function(e){return t.newGame()}}},[t._v("New game")]),r("button",{on:{click:function(e){return t.drawCards()}}},[t._v("Draw")]),r("button",{on:{click:function(e){return t.rotateBoard()}}},[t._v("Rotate")])])]),r("div",{staticClass:"board",class:[0===this.rotation?"board-v":"board-h"]},t._l(t.displayCards,(function(e,o){return r("set-card",{key:o,attrs:{card:e,color:t.colors[e.color],"alert-color":t.bg,selected:t.selection[o],isLoading:t.loading,rotation:t.rotation},nativeOn:{click:function(e){return t.selectCard(o)}}})})),1)])])},i=[],c=(r("c975"),r("baa5"),r("fb6a"),r("284c")),l=(r("8055"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card",class:[{blank:-1===t.card.count,selected:-1!==t.selected,pink:11===t.outlineColor,blue:22===t.outlineColor}]},[r("div",[r("svg",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],style:{transform:"rotateZ("+t.rotation+"deg)"},attrs:{viewBox:"0 0 120 120"}},[r("pattern",{attrs:{id:"diagonalHatch"+t.card.color,width:"5",height:"5",patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse"}},[r("line",{attrs:{x1:"0",y1:"0",x2:"0",y2:"5",stroke:t.color,"stroke-width":"2px"}})]),t._l(t.card.count+1,(function(e,o){return r(t.shapeComponents[t.card.shape],{key:o,tag:"component",attrs:{x:30,y:45-20*t.card.count+40*o,w:60,h:30,card:t.card,color:t.color}})}))],2)])])}),u=[],d=(r("a9e3"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("polygon",{attrs:{points:t.points,fill:t.fill[t.card.shading],stroke:t.color,"stroke-width":"3px"}})}),h=[],f=(r("99af"),{name:"SetDiamond",props:{x:Number,y:Number,w:Number,h:Number,card:Object,color:String},computed:{points:function(){var t=this.x,e=this.y,r=this.w,o=this.h;return"".concat(t+r/2,",").concat(e," ")+"".concat(t,",").concat(e+o/2," ")+"".concat(t+r/2,",").concat(e+o," ")+"".concat(t+r,",").concat(e+o/2)},fill:function(){return["#fff",this.color,"url('#diagonalHatch".concat(this.card.color,"')")]}}}),p=f,m=r("2877"),b=Object(m["a"])(p,d,h,!1,null,"5a117b1c",null),v=b.exports,g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("rect",{attrs:{x:t.x,y:t.y,rx:t.h/2,width:t.w,height:t.h,stroke:t.color,fill:t.fill[t.card.shading],"stroke-width":"3px"}})},w=[],C={name:"SetOval",props:{x:Number,y:Number,w:Number,h:Number,card:Object,color:String},computed:{fill:function(){return["#fff",this.color,"url('#diagonalHatch".concat(this.card.color,"')")]}}},S=C,x=Object(m["a"])(S,g,w,!1,null,"4c508b87",null),y=x.exports,k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("path",{style:{transform:"translate(50%, "+(.75*t.y+15)+"%)"},attrs:{d:t.d,fill:t.fill[t.card.shading],stroke:t.color,"stroke-width":"3px"}})},O=[],N={name:"SetSquiggle",props:{x:Number,y:Number,w:Number,h:Number,card:Object,color:String},computed:{d:function(){return"M ".concat(-14," ",14," ")+"C -2 14, -2 8, 10 8 C 22 8, 20 14, 28 14 C 40 14, 30 -14, 14 -14 C 2 -14, 2 -8, -10 -8 C -22 -8, -20 -14, -28 -14 C -40 -14, -30 14, -14 14"},fill:function(){return["#fff0",this.color,"url('#diagonalHatch".concat(this.card.color,"')")]}}},_=N,j=Object(m["a"])(_,k,O,!1,null,"0c50ca7a",null),E=j.exports,T={name:"SetCard",components:{SetDiamond:v,SetOval:y,SetSquiggle:E},props:{card:Object,selected:Number,color:String,alertColor:Number,isLoading:Boolean,rotation:Number},data:function(){return{shapeComponents:[v,y,E],outlineColor:0}},watch:{alertColor:function(){var t=this;0!==this.alertColor&&-1!==this.selected&&(this.outlineColor=this.alertColor,setTimeout((function(){t.outlineColor=0}),250))}}},M=T,$=(r("af4e"),Object(m["a"])(M,l,u,!1,null,"3b5b2f20",null)),L=$.exports,P={name:"SetGame",components:{SetCard:L},data:function(){return{sock:{},rawCards:[],selection:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],colors:["#ff3311","#33c055","#6622c0"],loading:!1,rotation:0,bg:0,colorState:0,roomName:""}},computed:{cards:function(){for(var t=[],e=0;e<this.rawCards.length;e++)t.push({count:this.rawCards[e]/27|0,color:this.rawCards[e]/9%3|0,shape:this.rawCards[e]/3%3|0,shading:this.rawCards[e]%3|0});return t},baseUrl:function(){return location.href.slice(0,location.href.lastIndexOf("/")+1)},socketUrl:function(){return"ws://"+location.host+"/"+this.roomName},roomUrl:function(){return"http://"+location.host+"/"+this.roomName},displayCards:function(){for(var t=Object(c["a"])(this.cards),e=0;e<Math.max(12-this.rawCards.length,0);e++)t.push({count:-1,color:0,shape:0,shading:0});return t},selectedCards:function(){for(var t=[],e=0;e<this.selection.length;e++)-1!==this.selection[e]&&t.push(this.selection[e]);return t},selectedIndices:function(){for(var t=[],e=0;e<this.selection.length;e++)-1!==this.selection[e]&&t.push(e);return t},setExists:function(){for(var t=this.rawCards.length,e=this.rawCards.slice(0,t/2),r=this.rawCards.slice(t/2),o=0;o<e.length-1;o++)for(var n=o;n<e.length-1;n++){var a=this.computeLastCard(e[o],e[n+1]);if(this.rawCards.indexOf(a)>-1)return!0}for(var s=0;s<r.length-1;s++)for(var i=s;i<r.length-1;i++){var c=this.computeLastCard(r[s],r[i+1]);if(this.rawCards.indexOf(c)>-1)return!0}return!1}},created:function(){this.roomName=location.href.substr(location.href.lastIndexOf("/")+1),this.sock=new WebSocket(this.socketUrl)},mounted:function(){this.init()},methods:{init:function(){var t=this;this.sock.onmessage=function(e){var r=JSON.parse(e.data),o=r.message,n=r.data;switch(o){case"new-game":t.rawCards=[];break;case"load-game":t.rawCards=n;break;case"draw-card":t.rawCards.push(n);break}setTimeout((function(){t.loading=!1}),200)}},flashColor:function(t){var e=this,r=this.rawCards[t[2]]===this.computeLastCard(this.rawCards[t[0]],this.rawCards[t[1]]);this.colorState=r?1:2,this.bg=r?1:2,setTimeout((function(){e.colorState=0}),500)},joinRoom:function(){window.location.href=this.roomUrl},computeLastCard:function(t,e){for(var r=0,o=0;o<4;o++){var n=t/Math.pow(3,o)%3|0,a=e/Math.pow(3,o)%3|0;r+=n===a?n*Math.pow(3,o):(3-n-a)*Math.pow(3,o)}return r},sockEmit:function(t,e){this.sock.send(JSON.stringify({message:t,data:e}))},newGame:function(){this.loading=!0,this.sockEmit("new-game")},drawCards:function(){this.rawCards.length<15&&this.sockEmit("draw-cards")},selectCard:function(t){var e=this.rawCards[t];-1===this.selection[t]?this.$set(this.selection,t,e):this.$set(this.selection,t,-1),3===this.selectedCards.length&&this.submitSet(this.selectedIndices)},submitSet:function(t){var e=this;this.flashColor(t),this.sockEmit("submit-set",t),setTimeout((function(){e.bg=0,e.selection=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]}),500)},rotateBoard:function(){this.rotation=0===this.rotation?90:0}}},U=P,I=(r("e76e"),Object(m["a"])(U,s,i,!1,null,"57473f81",null)),J=I.exports,B={name:"app",components:{SetGame:J}},G=B,H=(r("034f"),Object(m["a"])(G,n,a,!1,null,null,null)),D=H.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(D)}}).$mount("#app")},"85ec":function(t,e,r){},af4e:function(t,e,r){"use strict";var o=r("e23a"),n=r.n(o);n.a},e23a:function(t,e,r){},e76e:function(t,e,r){"use strict";var o=r("420a"),n=r.n(o);n.a}});
//# sourceMappingURL=app.2d72decb.js.map